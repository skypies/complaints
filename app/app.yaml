runtime: go
api_version: go1
instance_class: F1
service: default

automatic_scaling:
  # Default is 8; but there are latency issues that I think are
  # explained by requests blocking each other on the same (single) OS thread.
  # Only python runtimes support this, sadly.
  max_concurrent_requests: 1

inbound_services:
- mail_bounce

handlers:
- url: /cdb/.*
  script: _go_app
  login: admin
- url: /bksv/.*
  script: _go_app
  login: admin

- url: /stats-reset
  script: _go_app
  login: admin
- url: /month
  script: _go_app
  login: admin

- url: /email
  script: _go_app
  login: admin
- url: /emails-for-yesterday
  script: _go_app
  login: admin
- url: /masq
  script: _go_app
  login: admin
- url: /_ah/bounce
  script: _go_app
  login: admin

- url: /static
  static_dir: static

- url: /sw.js
  static_files: static/service-worker.js
  upload: static/service-worker.js

- url: /favicon.ico
  static_files: static/favicon.ico
  upload: static/favicon.ico

- url: /apple-touch-icon.png
  static_files: static/icon.png
  upload: static/icon.png
- url: /apple-touch-icon-precomposed.png
  static_files: static/icon.png
  upload: static/icon.png

- url: /apple-touch-icon-76x76.png
  static_files: static/icon-76.png
  upload: static/icon-76.png
- url: /apple-touch-icon-76x76-precomposed.png
  static_files: static/icon-76.png
  upload: static/icon-76.png

- url: /apple-touch-icon-120x120.png
  static_files: static/icon-120.png
  upload: static/icon-120.png
- url: /apple-touch-icon-120x120-precomposed.png
  static_files: static/icon-120.png
  upload: static/icon-120.png

- url: /apple-touch-icon-152x152.png
  static_files: static/icon-152.png
  upload: static/icon-152.png
- url: /apple-touch-icon-152x152-precomposed.png
  static_files: static/icon-152.png
  upload: static/icon-152.png

- url: /.*
  script: _go_app
